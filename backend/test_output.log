?   	specialstandard/cmd	[no test files]
?   	specialstandard/internal/auth	[no test files]
?   	specialstandard/internal/config	[no test files]
?   	specialstandard/internal/errs	[no test files]
?   	specialstandard/internal/models	[no test files]
?   	specialstandard/internal/s3_client	[no test files]
=== RUN   TestHealthEndpoint
20:05:39 | 200 |       1.097ms | 0.0.0.0 | GET | /api/v1/health | -
--- PASS: TestHealthEndpoint (0.01s)
=== RUN   TestGetSessionsEndpoint
=== RUN   TestGetSessionsEndpoint/successful_get_sessions_and_default_pagination
20:05:39 | 200 |     17.1106ms | 0.0.0.0 | GET | /api/v1/sessions | -
=== RUN   TestGetSessionsEndpoint/repository_error
2025/10/29 20:05:39 ERROR Failed to get session err="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to retrieve sessions" method=GET path=/api/v1/sessions/
20:05:39 | 500 |      1.0976ms | 0.0.0.0 | GET | /api/v1/sessions/ | http error: 500 Failed to retrieve sessions
=== RUN   TestGetSessionsEndpoint/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/api/v1/sessions
20:05:39 | 400 |      9.8037ms | 0.0.0.0 | GET | /api/v1/sessions | http error: 400 map[limit:Limit is invalid page:Page is invalid]
=== RUN   TestGetSessionsEndpoint/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/api/v1/sessions
20:05:39 | 400 |            0s | 0.0.0.0 | GET | /api/v1/sessions | http error: 400 Invalid Pagination Query Parameters
=== RUN   TestGetSessionsEndpoint/Default_Pagination
20:05:39 | 200 |            0s | 0.0.0.0 | GET | /api/v1/sessions | -
--- PASS: TestGetSessionsEndpoint (0.04s)
    --- PASS: TestGetSessionsEndpoint/successful_get_sessions_and_default_pagination (0.02s)
    --- PASS: TestGetSessionsEndpoint/repository_error (0.01s)
    --- PASS: TestGetSessionsEndpoint/Violating_Pagination_Arguments_Constraints (0.01s)
    --- PASS: TestGetSessionsEndpoint/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestGetSessionsEndpoint/Default_Pagination (0.00s)
=== RUN   TestGetStudentsEndpoint
20:05:39 | 200 |       711.4µs | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint (0.00s)
=== RUN   TestGetStudentsEndpoint_WithGradeFilter
20:05:39 | 200 |       596.6µs | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint_WithGradeFilter (0.00s)
=== RUN   TestGetStudentsEndpoint_WithTherapistFilter
20:05:39 | 200 |         830µs | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint_WithTherapistFilter (0.00s)
=== RUN   TestGetStudentsEndpoint_WithNameFilter
20:05:39 | 200 |       585.5µs | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint_WithNameFilter (0.00s)
=== RUN   TestGetStudentsEndpoint_WithCombinedFilters
20:05:39 | 200 |      1.4703ms | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint_WithCombinedFilters (0.00s)
=== RUN   TestGetStudentsEndpoint_InvalidTherapistID
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid therapist_id format" method=GET path=/api/v1/students
20:05:39 | 400 |            0s | 0.0.0.0 | GET | /api/v1/students | http error: 400 Invalid therapist_id format
--- PASS: TestGetStudentsEndpoint_InvalidTherapistID (0.00s)
=== RUN   TestGetStudentsEndpoint_EmptyFiltersIgnored
20:05:39 | 200 |       557.1µs | 0.0.0.0 | GET | /api/v1/students | -
--- PASS: TestGetStudentsEndpoint_EmptyFiltersIgnored (0.00s)
=== RUN   TestGetStudentByIDEndpoint
20:05:39 | 200 |            0s | 0.0.0.0 | GET | /api/v1/students/c4b8d824-d2fc-45f8-a33e-a57dc3f3b440 | -
--- PASS: TestGetStudentByIDEndpoint (0.00s)
=== RUN   TestCreateStudentEndpoint
20:05:39 | 201 |     12.6453ms | 0.0.0.0 | POST | /api/v1/students | -
--- PASS: TestCreateStudentEndpoint (0.02s)
=== RUN   TestUpdateStudentEndpoint
20:05:40 | 200 |            0s | 0.0.0.0 | PATCH | /api/v1/students/b515c963-c923-4bfd-bbcf-e5ee40b6d83e | -
--- PASS: TestUpdateStudentEndpoint (0.00s)
=== RUN   TestDeleteStudentEndpoint
20:05:40 | 204 |       810.2µs | 0.0.0.0 | DELETE | /api/v1/students/b3b2aba4-7463-4fbd-a070-709936183c09 | -
--- PASS: TestDeleteStudentEndpoint (0.00s)
=== RUN   TestGetSessionByIDEndpoint
=== RUN   TestGetSessionByIDEndpoint/successful_get_session_by_valid_UUID
20:05:40 | 200 |            0s | 0.0.0.0 | GET | /api/v1/sessions/123e4567-e89b-12d3-a456-426614174000 | -
=== RUN   TestGetSessionByIDEndpoint/bad_request_for_invalid_UUID
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Invalid UUID format for ID 'invalid-uuid'" method=GET path=/api/v1/sessions/invalid-uuid
20:05:40 | 400 |       614.6µs | 0.0.0.0 | GET | /api/v1/sessions/invalid-uuid | http error: 400 Invalid UUID format for ID 'invalid-uuid'
=== RUN   TestGetSessionByIDEndpoint/session_not_found
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 Session not found" method=GET path=/api/v1/sessions/123e4567-e89b-12d3-a456-426614174001
20:05:40 | 404 |       524.3µs | 0.0.0.0 | GET | /api/v1/sessions/123e4567-e89b-12d3-a456-426614174001 | http error: 404 Session not found
--- PASS: TestGetSessionByIDEndpoint (0.01s)
    --- PASS: TestGetSessionByIDEndpoint/successful_get_session_by_valid_UUID (0.00s)
    --- PASS: TestGetSessionByIDEndpoint/bad_request_for_invalid_UUID (0.00s)
    --- PASS: TestGetSessionByIDEndpoint/session_not_found (0.00s)
=== RUN   TestDeleteSessionsEndpoint
=== RUN   TestDeleteSessionsEndpoint/Invalid_UUID_-_Parsing_Error
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Parsing Error: Invalid ID Format. ID: 00000000-0000-0000-0000-000000000000" method=DELETE path=/sessions/0345
=== RUN   TestDeleteSessionsEndpoint/Success
20:05:40 | 200 |       507.7µs | 0.0.0.0 | DELETE | /api/v1/sessions/439cd42e-10fa-4e0b-a227-aa2d5342bba6 | -
--- PASS: TestDeleteSessionsEndpoint (0.00s)
    --- PASS: TestDeleteSessionsEndpoint/Invalid_UUID_-_Parsing_Error (0.00s)
    --- PASS: TestDeleteSessionsEndpoint/Success (0.00s)
=== RUN   TestHandler_PostSessions
2025/10/29 20:05:40 ERROR HTTP API error err="runtime error: invalid memory address or nil pointer dereference" method=POST path=/api/v1/sessions
--- PASS: TestHandler_PostSessions (0.00s)
=== RUN   TestHandler_PatchSessions
=== RUN   TestHandler_PatchSessions/Bad_UUID_Request_-_Not_a_UUID
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Parsing Error with Invalid ID Format. ID: 00000000-0000-0000-0000-000000000000" method=PATCH path=/sessions/0345
=== RUN   TestHandler_PatchSessions/Parsing_PatchInputSession_Error
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Failed to parse PatchSessionInput data" method=PATCH path=/sessions/5847c9a8-a207-4da5-a11c-f86c96e0d5cd
=== RUN   TestHandler_PatchSessions/Given_ID_not_found
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 Session Not Found" method=PATCH path=/sessions/7d92b52b-24dd-4abc-9a38-60b9497be01f
=== RUN   TestHandler_PatchSessions/foreign_key_violation_-_DOCTOR_WHO?_We_don't_know..
2025/10/29 20:05:40 ERROR Failed to patch session id=00a9e847-f594-4bd2-a303-97533873bc70 err="foreign key"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Invalid Reference" method=PATCH path=/sessions/00a9e847-f594-4bd2-a303-97533873bc70
=== RUN   TestHandler_PatchSessions/check_constraint_violation
2025/10/29 20:05:40 ERROR Failed to patch session id=8cc3377c-366a-4930-a910-7e93e428fa3f err="check constraint"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Violated a check constraint" method=PATCH path=/sessions/8cc3377c-366a-4930-a910-7e93e428fa3f
=== RUN   TestHandler_PatchSessions/Successfully_changed_1_field
=== RUN   TestHandler_PatchSessions/Successfully_changed_multiple_fields
=== RUN   TestHandler_PatchSessions/Successfully_changed_all_patchable_fields
--- PASS: TestHandler_PatchSessions (0.02s)
    --- PASS: TestHandler_PatchSessions/Bad_UUID_Request_-_Not_a_UUID (0.00s)
    --- PASS: TestHandler_PatchSessions/Parsing_PatchInputSession_Error (0.00s)
    --- PASS: TestHandler_PatchSessions/Given_ID_not_found (0.00s)
    --- PASS: TestHandler_PatchSessions/foreign_key_violation_-_DOCTOR_WHO?_We_don't_know.. (0.00s)
    --- PASS: TestHandler_PatchSessions/check_constraint_violation (0.00s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_1_field (0.01s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_multiple_fields (0.00s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_all_patchable_fields (0.00s)
=== RUN   TestGetTherapistByIDEndpoint
20:05:40 | 200 |      1.0727ms | 0.0.0.0 | GET | /api/v1/therapists/9dad94d8-6534-4510-90d7-e4e97c175a65 | -
--- PASS: TestGetTherapistByIDEndpoint (0.00s)
=== RUN   TestGetTherapistsEndpoint
=== RUN   TestGetTherapistsEndpoint/successful_get_therapists_with_default_pagination
20:05:40 | 200 |       538.8µs | 0.0.0.0 | GET | /api/v1/therapists | -
=== RUN   TestGetTherapistsEndpoint/repository_error
2025/10/29 20:05:40 ERROR HTTP API error err="database error" method=GET path=/api/v1/therapists
20:05:40 | 500 |      1.0431ms | 0.0.0.0 | GET | /api/v1/therapists | database error
=== RUN   TestGetTherapistsEndpoint/Bad_Pagination_Arguments
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/api/v1/therapists
20:05:40 | 400 |       587.8µs | 0.0.0.0 | GET | /api/v1/therapists | http error: 400 Invalid Pagination Query Parameters
=== RUN   TestGetTherapistsEndpoint/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/api/v1/therapists
20:05:40 | 400 |       578.7µs | 0.0.0.0 | GET | /api/v1/therapists | http error: 400 map[limit:Limit is invalid page:Page is invalid]
=== RUN   TestGetTherapistsEndpoint/Pagination_with_parameters
20:05:40 | 200 |       620.8µs | 0.0.0.0 | GET | /api/v1/therapists | -
--- PASS: TestGetTherapistsEndpoint (0.01s)
    --- PASS: TestGetTherapistsEndpoint/successful_get_therapists_with_default_pagination (0.00s)
    --- PASS: TestGetTherapistsEndpoint/repository_error (0.01s)
    --- PASS: TestGetTherapistsEndpoint/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestGetTherapistsEndpoint/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestGetTherapistsEndpoint/Pagination_with_parameters (0.00s)
=== RUN   TestCreateTherapistEndpoint
20:05:40 | 201 |       557.9µs | 0.0.0.0 | POST | /api/v1/therapists | -
--- PASS: TestCreateTherapistEndpoint (0.00s)
=== RUN   TestDeleteTherapistEndpoint
20:05:40 | 200 |       686.1µs | 0.0.0.0 | DELETE | /api/v1/therapists/4a9a4e58-ea6c-496a-915f-3e8214e77112 | -
--- PASS: TestDeleteTherapistEndpoint (0.00s)
=== RUN   TestPatchTherapistEndpoint
20:05:40 | 200 |            0s | 0.0.0.0 | PATCH | /api/v1/therapists/4a9a4e58-ea6c-496a-915f-3e8214e77112 | -
--- PASS: TestPatchTherapistEndpoint (0.00s)
=== RUN   TestCreateResourceEndpoint
20:05:40 | 201 |       508.6µs | 0.0.0.0 | POST | /api/v1/resources | -
--- PASS: TestCreateResourceEndpoint (0.00s)
=== RUN   TestGetResourcesEndpoint
20:05:40 | 200 |      1.5845ms | 0.0.0.0 | GET | /api/v1/resources | -
--- PASS: TestGetResourcesEndpoint (0.00s)
=== RUN   TestGetResourceByIDEndpoint
20:05:40 | 200 |      1.5897ms | 0.0.0.0 | GET | /api/v1/resources/f16c0e44-97ee-4da7-b68f-93b0565ca9cc | -
--- PASS: TestGetResourceByIDEndpoint (0.00s)
=== RUN   TestUpdateResourceEndpoint
20:05:40 | 200 |       560.7µs | 0.0.0.0 | PATCH | /api/v1/resources/98719d60-f263-4124-8b11-8550aaf8059d | -
--- PASS: TestUpdateResourceEndpoint (0.00s)
=== RUN   TestDeleteResourceEndpoint
20:05:40 | 204 |       527.7µs | 0.0.0.0 | DELETE | /api/v1/resources/e251d094-aba6-4d30-976b-e5fba22f5066 | -
--- PASS: TestDeleteResourceEndpoint (0.00s)
=== RUN   TestGetResourceByIDEndpoint_NotFound
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 [resource resource not found]" method=GET path=/api/v1/resources/b3db2ef3-e70c-4a8e-8711-32f79cb5fa1b
20:05:40 | 404 |       509.3µs | 0.0.0.0 | GET | /api/v1/resources/b3db2ef3-e70c-4a8e-8711-32f79cb5fa1b | http error: 404 [resource resource not found]
--- PASS: TestGetResourceByIDEndpoint_NotFound (0.00s)
=== RUN   TestUpdateResourceEndpoint_NotFound
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 [resource not found]" method=PATCH path=/api/v1/resources/8515bbfd-b45d-4eac-8f19-67bf3ed43f15
20:05:40 | 404 |       539.4µs | 0.0.0.0 | PATCH | /api/v1/resources/8515bbfd-b45d-4eac-8f19-67bf3ed43f15 | http error: 404 [resource not found]
--- PASS: TestUpdateResourceEndpoint_NotFound (0.00s)
=== RUN   TestDeleteResourceEndpoint_NotFound
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 [resource not found]" method=DELETE path=/api/v1/resources/20d8c647-ed90-4bab-a7d9-f5acb2509537
20:05:40 | 404 |       543.1µs | 0.0.0.0 | DELETE | /api/v1/resources/20d8c647-ed90-4bab-a7d9-f5acb2509537 | http error: 404 [resource not found]
--- PASS: TestDeleteResourceEndpoint_NotFound (0.00s)
=== RUN   TestCreateSessionStudentEndpoint
=== RUN   TestCreateSessionStudentEndpoint/Successful_creation
20:05:40 | 201 |       509.9µs | 0.0.0.0 | POST | /api/v1/session_students | -
=== RUN   TestCreateSessionStudentEndpoint/Missing_session_ID
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 map[sessionids:SessionIDs is required studentids:StudentIDs is required]" method=POST path=/api/v1/session_students
20:05:40 | 400 |      1.1415ms | 0.0.0.0 | POST | /api/v1/session_students | http error: 400 map[sessionids:SessionIDs is required studentids:StudentIDs is required]
=== RUN   TestCreateSessionStudentEndpoint/Invalid_JSON_format
20:05:40 | 400 |       640.7µs | 0.0.0.0 | POST | /api/v1/session_students | -
=== RUN   TestCreateSessionStudentEndpoint/Duplicate_relationship
20:05:40 | 409 |            0s | 0.0.0.0 | POST | /api/v1/session_students | -
--- PASS: TestCreateSessionStudentEndpoint (0.01s)
    --- PASS: TestCreateSessionStudentEndpoint/Successful_creation (0.00s)
    --- PASS: TestCreateSessionStudentEndpoint/Missing_session_ID (0.00s)
    --- PASS: TestCreateSessionStudentEndpoint/Invalid_JSON_format (0.00s)
    --- PASS: TestCreateSessionStudentEndpoint/Duplicate_relationship (0.00s)
=== RUN   TestDeleteSessionStudentEndpoint
=== RUN   TestDeleteSessionStudentEndpoint/Successful_deletion
20:05:40 | 204 |            0s | 0.0.0.0 | DELETE | /api/v1/session_students | -
=== RUN   TestDeleteSessionStudentEndpoint/Missing_student_ID
20:05:40 | 400 |            0s | 0.0.0.0 | DELETE | /api/v1/session_students | -
=== RUN   TestDeleteSessionStudentEndpoint/Invalid_JSON_format
20:05:40 | 400 |      3.3046ms | 0.0.0.0 | DELETE | /api/v1/session_students | -
=== RUN   TestDeleteSessionStudentEndpoint/Relationship_not_found
20:05:40 | 404 |            0s | 0.0.0.0 | DELETE | /api/v1/session_students | -
--- PASS: TestDeleteSessionStudentEndpoint (0.02s)
    --- PASS: TestDeleteSessionStudentEndpoint/Successful_deletion (0.01s)
    --- PASS: TestDeleteSessionStudentEndpoint/Missing_student_ID (0.00s)
    --- PASS: TestDeleteSessionStudentEndpoint/Invalid_JSON_format (0.01s)
    --- PASS: TestDeleteSessionStudentEndpoint/Relationship_not_found (0.00s)
=== RUN   TestPatchSessionStudentEndpoint
=== RUN   TestPatchSessionStudentEndpoint/Successful_patch_-_present_only
20:05:40 | 200 |       524.2µs | 0.0.0.0 | PATCH | /api/v1/session_students | -
=== RUN   TestPatchSessionStudentEndpoint/Successful_patch_-_notes_only
20:05:40 | 200 |       461.9µs | 0.0.0.0 | PATCH | /api/v1/session_students | -
=== RUN   TestPatchSessionStudentEndpoint/Missing_session_ID
20:05:40 | 400 |            0s | 0.0.0.0 | PATCH | /api/v1/session_students | -
=== RUN   TestPatchSessionStudentEndpoint/Relationship_not_found
2025/10/29 20:05:40 ERROR Failed to patch session student session_id=123e4567-e89b-12d3-a456-426614174000 student_id=987fcdeb-51a2-43d1-9c4f-123456789abc err="no rows affected"
20:05:40 | 404 |         508µs | 0.0.0.0 | PATCH | /api/v1/session_students | -
=== RUN   TestPatchSessionStudentEndpoint/Foreign_key_violation
2025/10/29 20:05:40 ERROR Failed to patch session student session_id=123e4567-e89b-12d3-a456-426614174000 student_id=987fcdeb-51a2-43d1-9c4f-123456789abc err="foreign key violation"
20:05:40 | 400 |            0s | 0.0.0.0 | PATCH | /api/v1/session_students | -
--- PASS: TestPatchSessionStudentEndpoint (0.01s)
    --- PASS: TestPatchSessionStudentEndpoint/Successful_patch_-_present_only (0.00s)
    --- PASS: TestPatchSessionStudentEndpoint/Successful_patch_-_notes_only (0.00s)
    --- PASS: TestPatchSessionStudentEndpoint/Missing_session_ID (0.00s)
    --- PASS: TestPatchSessionStudentEndpoint/Relationship_not_found (0.00s)
    --- PASS: TestPatchSessionStudentEndpoint/Foreign_key_violation (0.00s)
=== RUN   TestGetResourcesBySessionIDEndpoint_Success
20:05:40 | 200 |       609.7µs | 0.0.0.0 | GET | /api/v1/sessions/f936df63-a74d-4c5e-a4a8-ffd8bad1e583/resources | -
--- PASS: TestGetResourcesBySessionIDEndpoint_Success (0.00s)
=== RUN   TestGetResourcesBySessionIDEndpoint_EmptyArray
20:05:40 | 200 |         652µs | 0.0.0.0 | GET | /api/v1/sessions/63fbfc5f-2691-4d6d-8625-f8accd547603/resources | -
--- PASS: TestGetResourcesBySessionIDEndpoint_EmptyArray (0.01s)
=== RUN   TestGetResourcesBySessionIDEndpoint_InvalidUUID
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 map[id:Invalid UUID format]" method=GET path=/api/v1/sessions/invalid-uuid/resources
20:05:40 | 400 |            0s | 0.0.0.0 | GET | /api/v1/sessions/invalid-uuid/resources | http error: 400 map[id:Invalid UUID format]
--- PASS: TestGetResourcesBySessionIDEndpoint_InvalidUUID (0.00s)
=== RUN   TestGetResourcesBySessionIDEndpoint_InternalError
2025/10/29 20:05:40 ERROR Failed to get session's resources id=a7caeca7-0f6f-42df-9c1e-592f7970cfe5 err="database error"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 500 Failed to retrieve session resources" method=GET path=/api/v1/sessions/a7caeca7-0f6f-42df-9c1e-592f7970cfe5/resources
20:05:40 | 500 |       934.4µs | 0.0.0.0 | GET | /api/v1/sessions/a7caeca7-0f6f-42df-9c1e-592f7970cfe5/resources | http error: 500 Failed to retrieve session resources
--- PASS: TestGetResourcesBySessionIDEndpoint_InternalError (0.00s)
=== RUN   TestPostSessionResourceEndpoint_Success
20:05:40 | 201 |            0s | 0.0.0.0 | POST | /api/v1/session-resource | -
--- PASS: TestPostSessionResourceEndpoint_Success (0.00s)
=== RUN   TestPostSessionResourceEndpoint_SessionNotFound
2025/10/29 20:05:40 ERROR Failed to post session_resource err=":  (SQLSTATE 23503)"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 session not found" method=POST path=/api/v1/session-resource
20:05:40 | 404 |            0s | 0.0.0.0 | POST | /api/v1/session-resource | http error: 404 session not found
--- PASS: TestPostSessionResourceEndpoint_SessionNotFound (0.00s)
=== RUN   TestPostSessionResourceEndpoint_ResourceNotFound
2025/10/29 20:05:40 ERROR Failed to post session_resource err=":  (SQLSTATE 23503)"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 session not found" method=POST path=/api/v1/session-resource
20:05:40 | 404 |            0s | 0.0.0.0 | POST | /api/v1/session-resource | http error: 404 session not found
--- PASS: TestPostSessionResourceEndpoint_ResourceNotFound (0.00s)
=== RUN   TestPostSessionResourceEndpoint_InvalidBody
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionResource request body" method=POST path=/api/v1/session-resource
20:05:40 | 400 |            0s | 0.0.0.0 | POST | /api/v1/session-resource | http error: 400 Failed to parse PostSessionResource request body
--- PASS: TestPostSessionResourceEndpoint_InvalidBody (0.00s)
=== RUN   TestPostSessionResourceEndpoint_MissingFields
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionResource request body" method=POST path=/api/v1/session-resource
20:05:40 | 400 |            0s | 0.0.0.0 | POST | /api/v1/session-resource | http error: 400 Failed to parse PostSessionResource request body
--- PASS: TestPostSessionResourceEndpoint_MissingFields (0.00s)
=== RUN   TestDeleteSessionResourceEndpoint_Success
20:05:40 | 204 |            0s | 0.0.0.0 | DELETE | /api/v1/session-resource | -
--- PASS: TestDeleteSessionResourceEndpoint_Success (0.00s)
=== RUN   TestDeleteSessionResourceEndpoint_NotFound
2025/10/29 20:05:40 ERROR Failed to delete session_resource err="session resource relationship not found"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 404 session or resource not found" method=DELETE path=/api/v1/session-resource
20:05:40 | 404 |            0s | 0.0.0.0 | DELETE | /api/v1/session-resource | http error: 404 session or resource not found
--- PASS: TestDeleteSessionResourceEndpoint_NotFound (0.00s)
=== RUN   TestDeleteSessionResourceEndpoint_InvalidBody
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Failed to parse DeleteSessionResource data" method=DELETE path=/api/v1/session-resource
20:05:40 | 400 |       322.3µs | 0.0.0.0 | DELETE | /api/v1/session-resource | http error: 400 Failed to parse DeleteSessionResource data
--- PASS: TestDeleteSessionResourceEndpoint_InvalidBody (0.00s)
=== RUN   TestDeleteSessionResourceEndpoint_MissingFields
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Failed to parse DeleteSessionResource data" method=DELETE path=/api/v1/session-resource
20:05:40 | 400 |            0s | 0.0.0.0 | DELETE | /api/v1/session-resource | http error: 400 Failed to parse DeleteSessionResource data
--- PASS: TestDeleteSessionResourceEndpoint_MissingFields (0.00s)
=== RUN   TestDeleteSessionResourceEndpoint_InternalError
2025/10/29 20:05:40 ERROR Failed to delete session_resource err="database error"
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 500 Failed to Delete Session Resource" method=DELETE path=/api/v1/session-resource
20:05:40 | 500 |            0s | 0.0.0.0 | DELETE | /api/v1/session-resource | http error: 500 Failed to Delete Session Resource
--- PASS: TestDeleteSessionResourceEndpoint_InternalError (0.00s)
=== RUN   TestHandler_Signup
=== RUN   TestHandler_Signup/Invalid_Request_Body
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Invalid Request Body: json: cannot unmarshal number into Go struct field Credentials.first_name of type string" method=POST path=/signup
=== RUN   TestHandler_Signup/Successful_Signup_Request
--- PASS: TestHandler_Signup (0.01s)
    --- PASS: TestHandler_Signup/Invalid_Request_Body (0.00s)
    --- PASS: TestHandler_Signup/Successful_Signup_Request (0.01s)
=== RUN   TestHandler_Login
=== RUN   TestHandler_Login/Invalid_Request_Body
2025/10/29 20:05:40 ERROR HTTP API error err="http error: 400 Invalid Request Body: {  <nil> <nil> false}" method=POST path=/login
=== RUN   TestHandler_Login/Successful_Login_Request
false
--- PASS: TestHandler_Login (0.01s)
    --- PASS: TestHandler_Login/Invalid_Request_Body (0.00s)
    --- PASS: TestHandler_Login/Successful_Login_Request (0.01s)
=== RUN   TestEndpoint_PromoteStudents
20:05:40 | 200 |      1.0916ms | 0.0.0.0 | PATCH | /api/v1/students/promote | -
--- PASS: TestEndpoint_PromoteStudents (0.01s)
PASS
ok  	specialstandard/internal/service	0.695s
?   	specialstandard/internal/service/authsession	[no test files]
=== RUN   TestHandler_SignUp
=== RUN   TestHandler_SignUp/Invalid_Request_Body
2025/10/29 20:05:42 ERROR HTTP API error err="http error: 400 Invalid Request Body: json: cannot unmarshal number into Go struct field Credentials.first_name of type string" method=POST path=/signup
=== RUN   TestHandler_SignUp/Successful_Signup_Request
--- PASS: TestHandler_SignUp (0.01s)
    --- PASS: TestHandler_SignUp/Invalid_Request_Body (0.01s)
    --- PASS: TestHandler_SignUp/Successful_Signup_Request (0.01s)
=== RUN   TestHandler_Login
=== RUN   TestHandler_Login/Invalid_Request_Body
2025/10/29 20:05:42 ERROR HTTP API error err="http error: 400 Invalid Request Body: {  <nil> <nil> false}" method=POST path=/login
=== RUN   TestHandler_Login/Successful_Login_Request
false
--- PASS: TestHandler_Login (0.00s)
    --- PASS: TestHandler_Login/Invalid_Request_Body (0.00s)
    --- PASS: TestHandler_Login/Successful_Login_Request (0.00s)
PASS
ok  	specialstandard/internal/service/handler/auth	2.714s
=== RUN   TestHandler_PostResource
=== RUN   TestHandler_PostResource/successful_post_resource
=== RUN   TestHandler_PostResource/repository_error
--- PASS: TestHandler_PostResource (0.01s)
    --- PASS: TestHandler_PostResource/successful_post_resource (0.01s)
    --- PASS: TestHandler_PostResource/repository_error (0.00s)
=== RUN   TestHandler_GetResource
=== RUN   TestHandler_GetResource/successful_get_resource
=== RUN   TestHandler_GetResource/repository_error
--- PASS: TestHandler_GetResource (0.00s)
    --- PASS: TestHandler_GetResource/successful_get_resource (0.00s)
    --- PASS: TestHandler_GetResource/repository_error (0.00s)
=== RUN   TestHandler_GetResources
=== RUN   TestHandler_GetResources/successful_get_resources_with_default_pagination
=== RUN   TestHandler_GetResources/empty_resources_list
=== RUN   TestHandler_GetResources/theme_params_filter
=== RUN   TestHandler_GetResources/invalid_theme_year_filter
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[theme_year:year is invalid]" method=GET path=/resources
=== RUN   TestHandler_GetResources/repository_error
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 database error" method=GET path=/resources
=== RUN   TestHandler_GetResources/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/resources
=== RUN   TestHandler_GetResources/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/resources
=== RUN   TestHandler_GetResources/Pagination_Parameters
--- PASS: TestHandler_GetResources (0.01s)
    --- PASS: TestHandler_GetResources/successful_get_resources_with_default_pagination (0.00s)
    --- PASS: TestHandler_GetResources/empty_resources_list (0.00s)
    --- PASS: TestHandler_GetResources/theme_params_filter (0.00s)
    --- PASS: TestHandler_GetResources/invalid_theme_year_filter (0.01s)
    --- PASS: TestHandler_GetResources/repository_error (0.00s)
    --- PASS: TestHandler_GetResources/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetResources/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetResources/Pagination_Parameters (0.00s)
=== RUN   TestHandler_PatchResource
=== RUN   TestHandler_PatchResource/repository_error
--- PASS: TestHandler_PatchResource (0.00s)
    --- PASS: TestHandler_PatchResource/repository_error (0.00s)
=== RUN   TestHandler_DeleteResource
=== RUN   TestHandler_DeleteResource/successful_delete_resource
=== RUN   TestHandler_DeleteResource/repository_error
--- PASS: TestHandler_DeleteResource (0.00s)
    --- PASS: TestHandler_DeleteResource/successful_delete_resource (0.00s)
    --- PASS: TestHandler_DeleteResource/repository_error (0.00s)
PASS
ok  	specialstandard/internal/service/handler/resource	0.500s
=== RUN   TestHandler_GetSessions
=== RUN   TestHandler_GetSessions/successful_get_sessions_with_default_pagination
=== RUN   TestHandler_GetSessions/repository_error
2025/10/29 20:05:39 ERROR Failed to get session err="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to retrieve sessions" method=GET path=/sessions/
=== RUN   TestHandler_GetSessions/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/sessions
=== RUN   TestHandler_GetSessions/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/sessions
=== RUN   TestHandler_GetSessions/Pagination_Parameters
--- PASS: TestHandler_GetSessions (0.01s)
    --- PASS: TestHandler_GetSessions/successful_get_sessions_with_default_pagination (0.00s)
    --- PASS: TestHandler_GetSessions/repository_error (0.00s)
    --- PASS: TestHandler_GetSessions/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetSessions/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetSessions/Pagination_Parameters (0.00s)
=== RUN   TestHandler_DeleteSessions
=== RUN   TestHandler_DeleteSessions/Bad_UUID_Request
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Parsing Error: Invalid ID Format. ID: 00000000-0000-0000-0000-000000000000" method=DELETE path=/sessions/1234
=== RUN   TestHandler_DeleteSessions/Successful_Delete_Session
=== RUN   TestHandler_DeleteSessions/internal_server_error
2025/10/29 20:05:39 ERROR Failed to delete session id=ecb0edcb-3287-46cb-b1c4-79f85525ee14 err="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Internal Server Error" method=DELETE path=/sessions/ecb0edcb-3287-46cb-b1c4-79f85525ee14
--- PASS: TestHandler_DeleteSessions (0.00s)
    --- PASS: TestHandler_DeleteSessions/Bad_UUID_Request (0.00s)
    --- PASS: TestHandler_DeleteSessions/Successful_Delete_Session (0.00s)
    --- PASS: TestHandler_DeleteSessions/internal_server_error (0.00s)
=== RUN   TestHandler_PostSessions
=== RUN   TestHandler_PostSessions/Missing_Items,_Invalid_JSON
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[therapistid:TherapistID is required]" method=POST path=/sessions
=== RUN   TestHandler_PostSessions/Empty_Values_that_are_Required
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionInput data" method=POST path=/sessions
=== RUN   TestHandler_PostSessions/Foreign_Key_Violation:_Therapist_ID_doesn't_exist._DOCTOR_WHO?!
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to GetDB" method=POST path=/sessions
=== RUN   TestHandler_PostSessions/Start_time_and_end_time_(check_constraint_violation)
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to GetDB" method=POST path=/sessions
=== RUN   TestHandler_PostSessions/Success!
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to GetDB" method=POST path=/sessions
=== RUN   TestHandler_PostSessions/Database_Connection_Refused
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to GetDB" method=POST path=/sessions
--- PASS: TestHandler_PostSessions (0.00s)
    --- PASS: TestHandler_PostSessions/Missing_Items,_Invalid_JSON (0.00s)
    --- PASS: TestHandler_PostSessions/Empty_Values_that_are_Required (0.00s)
    --- PASS: TestHandler_PostSessions/Foreign_Key_Violation:_Therapist_ID_doesn't_exist._DOCTOR_WHO?! (0.00s)
    --- PASS: TestHandler_PostSessions/Start_time_and_end_time_(check_constraint_violation) (0.00s)
    --- PASS: TestHandler_PostSessions/Success! (0.00s)
    --- PASS: TestHandler_PostSessions/Database_Connection_Refused (0.00s)
=== RUN   TestHandler_PatchSessions
=== RUN   TestHandler_PatchSessions/Bad_UUID_Request
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Parsing Error with Invalid ID Format. ID: 00000000-0000-0000-0000-000000000000" method=PATCH path=/sessions/0345
=== RUN   TestHandler_PatchSessions/Parsing_PatchInputSession_Error
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse PatchSessionInput data" method=PATCH path=/sessions/a9b0f41a-5352-4abb-80e3-97dce29ae648
=== RUN   TestHandler_PatchSessions/Given_ID_not_found
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 Session Not Found" method=PATCH path=/sessions/0dd181d6-0c42-4566-93a3-120e1176c504
=== RUN   TestHandler_PatchSessions/foreign_key_violation_-_DOCTOR_WHO?_We_don't_know..
2025/10/29 20:05:39 ERROR Failed to patch session id=2f7cde44-6cca-4736-b253-4ec4d68b9c3d err="foreign key"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Reference" method=PATCH path=/sessions/2f7cde44-6cca-4736-b253-4ec4d68b9c3d
=== RUN   TestHandler_PatchSessions/check_constraint_violation
2025/10/29 20:05:39 ERROR Failed to patch session id=0ea820f6-813b-41b0-8401-5bb4e36b7962 err="check constraint"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Violated a check constraint" method=PATCH path=/sessions/0ea820f6-813b-41b0-8401-5bb4e36b7962
=== RUN   TestHandler_PatchSessions/Successfully_changed_1_field
=== RUN   TestHandler_PatchSessions/Successfully_changed_multiple_fields
=== RUN   TestHandler_PatchSessions/Successfully_changed_all_patchable_fields
--- PASS: TestHandler_PatchSessions (0.00s)
    --- PASS: TestHandler_PatchSessions/Bad_UUID_Request (0.00s)
    --- PASS: TestHandler_PatchSessions/Parsing_PatchInputSession_Error (0.00s)
    --- PASS: TestHandler_PatchSessions/Given_ID_not_found (0.00s)
    --- PASS: TestHandler_PatchSessions/foreign_key_violation_-_DOCTOR_WHO?_We_don't_know.. (0.00s)
    --- PASS: TestHandler_PatchSessions/check_constraint_violation (0.00s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_1_field (0.00s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_multiple_fields (0.00s)
    --- PASS: TestHandler_PatchSessions/Successfully_changed_all_patchable_fields (0.00s)
PASS
ok  	specialstandard/internal/service/handler/session	0.447s
=== RUN   TestHandler_GetSessionResources
=== RUN   TestHandler_GetSessionResources/Invalid_UUID_format
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[id:Invalid UUID format]" method=GET path=/sessions/invalid-uuid/resources
=== RUN   TestHandler_GetSessionResources/Empty_ID_parameter
2025/10/29 20:05:39 ERROR HTTP API error err="Cannot GET /sessions//resources" method=GET path=/sessions//resources
=== RUN   TestHandler_GetSessionResources/successful_get_resources_-_multiple_resources_with_default_pagination
=== RUN   TestHandler_GetSessionResources/successful_get_resources_-_empty_array
=== RUN   TestHandler_GetSessionResources/repository_returns_nil_-_converts_to_empty_array
=== RUN   TestHandler_GetSessionResources/repository_error
2025/10/29 20:05:39 ERROR Failed to get session's resources id=825d76f5-baef-43ad-abba-a348d65f11a0 err="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to retrieve session resources" method=GET path=/sessions/825d76f5-baef-43ad-abba-a348d65f11a0/resources
=== RUN   TestHandler_GetSessionResources/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/sessions/274ff681-2166-4fb2-8e98-04490f00fade/resources
=== RUN   TestHandler_GetSessionResources/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/sessions/a3eb3246-8b91-4820-8964-79c787c5e781/resources
=== RUN   TestHandler_GetSessionResources/Pagination_Parameters
--- PASS: TestHandler_GetSessionResources (0.01s)
    --- PASS: TestHandler_GetSessionResources/Invalid_UUID_format (0.01s)
    --- PASS: TestHandler_GetSessionResources/Empty_ID_parameter (0.00s)
    --- PASS: TestHandler_GetSessionResources/successful_get_resources_-_multiple_resources_with_default_pagination (0.00s)
    --- PASS: TestHandler_GetSessionResources/successful_get_resources_-_empty_array (0.00s)
    --- PASS: TestHandler_GetSessionResources/repository_returns_nil_-_converts_to_empty_array (0.00s)
    --- PASS: TestHandler_GetSessionResources/repository_error (0.00s)
    --- PASS: TestHandler_GetSessionResources/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetSessionResources/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetSessionResources/Pagination_Parameters (0.00s)
=== RUN   TestHandler_PostSessionResource
=== RUN   TestHandler_PostSessionResource/Invalid_JSON
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionResource request body" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Invalid_UUID_format_in_session_id
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionResource request body" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Invalid_UUID_format_in_resource_id
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse PostSessionResource request body" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Foreign_key_violation_-_session_not_found
2025/10/29 20:05:39 ERROR Failed to post session_resource err="ERROR: insert or update on table \"session_resource\" violates foreign key constraint (SQLSTATE 23503)"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 session not found" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Check_constraint_violation
2025/10/29 20:05:39 ERROR Failed to post session_resource err="violates check constraint"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Violated a check constraint" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Database_connection_error
2025/10/29 20:05:39 ERROR Failed to post session_resource err="connection refused"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Database Connection Error" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Generic_database_error
2025/10/29 20:05:39 ERROR Failed to post session_resource err="some database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to Create Session Resource" method=POST path=/session-resource
=== RUN   TestHandler_PostSessionResource/Success!
--- PASS: TestHandler_PostSessionResource (0.00s)
    --- PASS: TestHandler_PostSessionResource/Invalid_JSON (0.00s)
    --- PASS: TestHandler_PostSessionResource/Invalid_UUID_format_in_session_id (0.00s)
    --- PASS: TestHandler_PostSessionResource/Invalid_UUID_format_in_resource_id (0.00s)
    --- PASS: TestHandler_PostSessionResource/Foreign_key_violation_-_session_not_found (0.00s)
    --- PASS: TestHandler_PostSessionResource/Check_constraint_violation (0.00s)
    --- PASS: TestHandler_PostSessionResource/Database_connection_error (0.00s)
    --- PASS: TestHandler_PostSessionResource/Generic_database_error (0.00s)
    --- PASS: TestHandler_PostSessionResource/Success! (0.00s)
=== RUN   TestHandler_DeleteSessionResource
=== RUN   TestHandler_DeleteSessionResource/Invalid_JSON
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse DeleteSessionResource data" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Invalid_UUID_format
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse DeleteSessionResource data" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Foreign_key_violation_-_session_or_resource_not_found
2025/10/29 20:05:39 ERROR Failed to delete session_resource err="ERROR: violates foreign key constraint (SQLSTATE 23503)"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 session or resource not found" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Relationship_not_found
2025/10/29 20:05:39 ERROR Failed to delete session_resource err="relationship not found"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 session or resource not found" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Database_connection_error
2025/10/29 20:05:39 ERROR Failed to delete session_resource err="connection refused"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Database Connection Error" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Generic_database_error
2025/10/29 20:05:39 ERROR Failed to delete session_resource err="some database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to Delete Session Resource" method=DELETE path=/session-resource
=== RUN   TestHandler_DeleteSessionResource/Success!
--- PASS: TestHandler_DeleteSessionResource (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Invalid_JSON (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Invalid_UUID_format (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Foreign_key_violation_-_session_or_resource_not_found (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Relationship_not_found (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Database_connection_error (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Generic_database_error (0.00s)
    --- PASS: TestHandler_DeleteSessionResource/Success! (0.00s)
PASS
ok  	specialstandard/internal/service/handler/session_resource	0.441s
=== RUN   TestHandler_CreateSessionStudent
=== RUN   TestHandler_CreateSessionStudent/successful_create_session_student
=== RUN   TestHandler_CreateSessionStudent/successful_create_session_student_minimal_data
=== RUN   TestHandler_CreateSessionStudent/invalid_JSON_body
=== RUN   TestHandler_CreateSessionStudent/missing_session_id
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[sessionids:SessionIDs is required]" method=POST path=/session_students
=== RUN   TestHandler_CreateSessionStudent/missing_student_id
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[studentids:StudentIDs is required]" method=POST path=/session_students
=== RUN   TestHandler_CreateSessionStudent/invalid_session_id_format
=== RUN   TestHandler_CreateSessionStudent/invalid_student_id_format
=== RUN   TestHandler_CreateSessionStudent/empty_session_id_nil_uuid
=== RUN   TestHandler_CreateSessionStudent/empty_student_id_nil_uuid
=== RUN   TestHandler_CreateSessionStudent/duplicate_session_student_relationship
=== RUN   TestHandler_CreateSessionStudent/repository_save_error
=== RUN   TestHandler_CreateSessionStudent/empty_JSON_body
=== RUN   TestHandler_CreateSessionStudent/unique_violation_conflict_error
=== RUN   TestHandler_CreateSessionStudent/successful_multiple_session_ids
--- PASS: TestHandler_CreateSessionStudent (0.02s)
    --- PASS: TestHandler_CreateSessionStudent/successful_create_session_student (0.01s)
    --- PASS: TestHandler_CreateSessionStudent/successful_create_session_student_minimal_data (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/invalid_JSON_body (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/missing_session_id (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/missing_student_id (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/invalid_session_id_format (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/invalid_student_id_format (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/empty_session_id_nil_uuid (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/empty_student_id_nil_uuid (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/duplicate_session_student_relationship (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/repository_save_error (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/empty_JSON_body (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/unique_violation_conflict_error (0.00s)
    --- PASS: TestHandler_CreateSessionStudent/successful_multiple_session_ids (0.00s)
=== RUN   TestHandler_PatchSessionStudent
=== RUN   TestHandler_PatchSessionStudent/successful_patch_present_only
=== RUN   TestHandler_PatchSessionStudent/successful_patch_notes_only
=== RUN   TestHandler_PatchSessionStudent/successful_patch_both_fields
=== RUN   TestHandler_PatchSessionStudent/invalid_JSON_body
=== RUN   TestHandler_PatchSessionStudent/missing_session_id
=== RUN   TestHandler_PatchSessionStudent/missing_student_id
=== RUN   TestHandler_PatchSessionStudent/session_student_not_found
2025/10/29 20:05:39 ERROR Failed to patch session student session_id=34b1a2b8-9c0c-45bc-b67f-a36c26685310 student_id=aaa47550-1dd8-4064-a88c-89546d0250b7 err="no rows affected"
=== RUN   TestHandler_PatchSessionStudent/foreign_key_violation
2025/10/29 20:05:39 ERROR Failed to patch session student session_id=34b1a2b8-9c0c-45bc-b67f-a36c26685310 student_id=aaa47550-1dd8-4064-a88c-89546d0250b7 err="foreign key violation"
=== RUN   TestHandler_PatchSessionStudent/repository_error
2025/10/29 20:05:39 ERROR Failed to patch session student session_id=34b1a2b8-9c0c-45bc-b67f-a36c26685310 student_id=aaa47550-1dd8-4064-a88c-89546d0250b7 err="database connection failed"
--- PASS: TestHandler_PatchSessionStudent (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/successful_patch_present_only (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/successful_patch_notes_only (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/successful_patch_both_fields (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/invalid_JSON_body (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/missing_session_id (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/missing_student_id (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/session_student_not_found (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/foreign_key_violation (0.00s)
    --- PASS: TestHandler_PatchSessionStudent/repository_error (0.00s)
=== RUN   TestHandler_DeleteSessionStudent
=== RUN   TestHandler_DeleteSessionStudent/successful_delete_session_student
=== RUN   TestHandler_DeleteSessionStudent/invalid_JSON_body
=== RUN   TestHandler_DeleteSessionStudent/missing_session_id
=== RUN   TestHandler_DeleteSessionStudent/missing_student_id
=== RUN   TestHandler_DeleteSessionStudent/invalid_session_id_format
=== RUN   TestHandler_DeleteSessionStudent/invalid_student_id_format
=== RUN   TestHandler_DeleteSessionStudent/empty_session_id_nil_uuid
=== RUN   TestHandler_DeleteSessionStudent/empty_student_id_nil_uuid
=== RUN   TestHandler_DeleteSessionStudent/session_student_relationship_not_found
=== RUN   TestHandler_DeleteSessionStudent/repository_delete_error
--- PASS: TestHandler_DeleteSessionStudent (0.01s)
    --- PASS: TestHandler_DeleteSessionStudent/successful_delete_session_student (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/invalid_JSON_body (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/missing_session_id (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/missing_student_id (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/invalid_session_id_format (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/invalid_student_id_format (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/empty_session_id_nil_uuid (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/empty_student_id_nil_uuid (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/session_student_relationship_not_found (0.00s)
    --- PASS: TestHandler_DeleteSessionStudent/repository_delete_error (0.00s)
PASS
ok  	specialstandard/internal/service/handler/session_student	0.510s
=== RUN   TestHandler_GetStudents
=== RUN   TestHandler_GetStudents/successful_get_students_with_default_pagination
=== RUN   TestHandler_GetStudents/empty_students_list
=== RUN   TestHandler_GetStudents/repository_error
2025/10/29 20:05:39 ERROR HTTP API error err="database error" method=GET path=/students
=== RUN   TestHandler_GetStudents/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid]" method=GET path=/students
=== RUN   TestHandler_GetStudents/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Query Parameters" method=GET path=/students
=== RUN   TestHandler_GetStudents/Pagination_Parameters
=== RUN   TestHandler_GetStudents/successful_get_students_with_grade_filter
=== RUN   TestHandler_GetStudents/successful_get_students_with_therapist_filter
=== RUN   TestHandler_GetStudents/successful_get_students_with_name_filter
=== RUN   TestHandler_GetStudents/successful_get_students_with_all_filters
=== RUN   TestHandler_GetStudents/empty_results_with_filters
=== RUN   TestHandler_GetStudents/case_insensitive_name_search
=== RUN   TestHandler_GetStudents/filter_by_grade_with_pagination
--- PASS: TestHandler_GetStudents (0.02s)
    --- PASS: TestHandler_GetStudents/successful_get_students_with_default_pagination (0.02s)
    --- PASS: TestHandler_GetStudents/empty_students_list (0.00s)
    --- PASS: TestHandler_GetStudents/repository_error (0.00s)
    --- PASS: TestHandler_GetStudents/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetStudents/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetStudents/Pagination_Parameters (0.00s)
    --- PASS: TestHandler_GetStudents/successful_get_students_with_grade_filter (0.00s)
    --- PASS: TestHandler_GetStudents/successful_get_students_with_therapist_filter (0.00s)
    --- PASS: TestHandler_GetStudents/successful_get_students_with_name_filter (0.00s)
    --- PASS: TestHandler_GetStudents/successful_get_students_with_all_filters (0.00s)
    --- PASS: TestHandler_GetStudents/empty_results_with_filters (0.00s)
    --- PASS: TestHandler_GetStudents/case_insensitive_name_search (0.00s)
    --- PASS: TestHandler_GetStudents/filter_by_grade_with_pagination (0.00s)
=== RUN   TestHandler_GetStudent
=== RUN   TestHandler_GetStudent/successful_get_student
=== RUN   TestHandler_GetStudent/student_not_found
=== RUN   TestHandler_GetStudent/invalid_UUID_format
=== RUN   TestHandler_GetStudent/repository_error
--- PASS: TestHandler_GetStudent (0.01s)
    --- PASS: TestHandler_GetStudent/successful_get_student (0.00s)
    --- PASS: TestHandler_GetStudent/student_not_found (0.00s)
    --- PASS: TestHandler_GetStudent/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_GetStudent/repository_error (0.00s)
=== RUN   TestHandler_UpdateStudent
=== RUN   TestHandler_UpdateStudent/update_grade_only
=== RUN   TestHandler_UpdateStudent/update_IEP_only
=== RUN   TestHandler_UpdateStudent/update_name_and_grade
=== RUN   TestHandler_UpdateStudent/update_DOB_with_valid_date
=== RUN   TestHandler_UpdateStudent/invalid_UUID_format
=== RUN   TestHandler_UpdateStudent/student_not_found
=== RUN   TestHandler_UpdateStudent/invalid_JSON_body
=== RUN   TestHandler_UpdateStudent/invalid_date_format
=== RUN   TestHandler_UpdateStudent/invalid_therapist_UUID
=== RUN   TestHandler_UpdateStudent/UpdateStudent_repository_error
--- PASS: TestHandler_UpdateStudent (0.01s)
    --- PASS: TestHandler_UpdateStudent/update_grade_only (0.00s)
    --- PASS: TestHandler_UpdateStudent/update_IEP_only (0.00s)
    --- PASS: TestHandler_UpdateStudent/update_name_and_grade (0.00s)
    --- PASS: TestHandler_UpdateStudent/update_DOB_with_valid_date (0.00s)
    --- PASS: TestHandler_UpdateStudent/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_UpdateStudent/student_not_found (0.00s)
    --- PASS: TestHandler_UpdateStudent/invalid_JSON_body (0.00s)
    --- PASS: TestHandler_UpdateStudent/invalid_date_format (0.00s)
    --- PASS: TestHandler_UpdateStudent/invalid_therapist_UUID (0.00s)
    --- PASS: TestHandler_UpdateStudent/UpdateStudent_repository_error (0.00s)
=== RUN   TestHandler_AddStudent
=== RUN   TestHandler_AddStudent/successful_create_student
=== RUN   TestHandler_AddStudent/successful_create_student_with_different_data
=== RUN   TestHandler_AddStudent/invalid_JSON_body
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid JSON format" method=POST path=/students
=== RUN   TestHandler_AddStudent/missing_required_fields
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[lastname:LastName is required therapistid:TherapistID is required]" method=POST path=/students
=== RUN   TestHandler_AddStudent/invalid_date_format
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[dob:DOB is invalid]" method=POST path=/students
=== RUN   TestHandler_AddStudent/invalid_therapist_UUID_format
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[therapistid:TherapistID is invalid]" method=POST path=/students
=== RUN   TestHandler_AddStudent/repository_save_error
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Database error" method=POST path=/students
=== RUN   TestHandler_AddStudent/valid_date_edge_cases
--- PASS: TestHandler_AddStudent (0.01s)
    --- PASS: TestHandler_AddStudent/successful_create_student (0.00s)
    --- PASS: TestHandler_AddStudent/successful_create_student_with_different_data (0.00s)
    --- PASS: TestHandler_AddStudent/invalid_JSON_body (0.00s)
    --- PASS: TestHandler_AddStudent/missing_required_fields (0.00s)
    --- PASS: TestHandler_AddStudent/invalid_date_format (0.01s)
    --- PASS: TestHandler_AddStudent/invalid_therapist_UUID_format (0.00s)
    --- PASS: TestHandler_AddStudent/repository_save_error (0.00s)
    --- PASS: TestHandler_AddStudent/valid_date_edge_cases (0.00s)
=== RUN   TestHandler_DeleteStudent
=== RUN   TestHandler_DeleteStudent/successful_delete_student
=== RUN   TestHandler_DeleteStudent/invalid_UUID_format
=== RUN   TestHandler_DeleteStudent/repository_error
--- PASS: TestHandler_DeleteStudent (0.00s)
    --- PASS: TestHandler_DeleteStudent/successful_delete_student (0.00s)
    --- PASS: TestHandler_DeleteStudent/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_DeleteStudent/repository_error (0.00s)
PASS
ok  	specialstandard/internal/service/handler/student	0.442s
=== RUN   TestHandler_CreateTheme
=== RUN   TestHandler_CreateTheme/successful_create_theme
=== RUN   TestHandler_CreateTheme/invalid_JSON
2025/10/29 20:05:39 ERROR Failed to parse theme JSON error="unexpected end of JSON input"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse theme data" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/validation_error_-_missing_name
2025/10/29 20:05:39 ERROR Theme validation failed errors="[{Error:true FailedField:Name Tag:required Value:}]"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[name:Name is required]" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/validation_error_-_invalid_month
2025/10/29 20:05:39 ERROR Theme validation failed errors="[{Error:true FailedField:Month Tag:lte:12 Value:13}]"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[month:Month is invalid]" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/validation_error_-_invalid_year
2025/10/29 20:05:39 ERROR Theme validation failed errors="[{Error:true FailedField:Year Tag:gte:1900 Value:1800}]"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[year:Year is invalid]" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/foreign_key_constraint_error
2025/10/29 20:05:39 ERROR Foreign key constraint error creating theme error="foreign key constraint violated"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid reference to related data" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/database_connection_error
2025/10/29 20:05:39 ERROR Database connection error creating theme error="connection refused"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Database connection error" method=POST path=/themes
=== RUN   TestHandler_CreateTheme/repository_error
2025/10/29 20:05:39 ERROR Failed to create theme error="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to create theme" method=POST path=/themes
--- PASS: TestHandler_CreateTheme (0.01s)
    --- PASS: TestHandler_CreateTheme/successful_create_theme (0.00s)
    --- PASS: TestHandler_CreateTheme/invalid_JSON (0.00s)
    --- PASS: TestHandler_CreateTheme/validation_error_-_missing_name (0.00s)
    --- PASS: TestHandler_CreateTheme/validation_error_-_invalid_month (0.00s)
    --- PASS: TestHandler_CreateTheme/validation_error_-_invalid_year (0.00s)
    --- PASS: TestHandler_CreateTheme/foreign_key_constraint_error (0.00s)
    --- PASS: TestHandler_CreateTheme/database_connection_error (0.00s)
    --- PASS: TestHandler_CreateTheme/repository_error (0.00s)
=== RUN   TestHandler_GetThemes
=== RUN   TestHandler_GetThemes/successful_get_themes
=== RUN   TestHandler_GetThemes/repository_error
2025/10/29 20:05:39 ERROR Failed to fetch themes error="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Failed to fetch themes" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Pagination_Parameters
=== RUN   TestHandler_GetThemes/Filter_by_month
=== RUN   TestHandler_GetThemes/Filter_by_year
=== RUN   TestHandler_GetThemes/Filter_by_search_term
=== RUN   TestHandler_GetThemes/Filter_by_multiple_parameters
=== RUN   TestHandler_GetThemes/Invalid_month_filter
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[month:Month is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Invalid_year_filter
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[year:Year is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Invalid_month_filter_-_zero
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[month:Month is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Invalid_month_filter_-_negative
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[month:Month is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Invalid_year_filter_-_too_high
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[year:Year is invalid]" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Non-integer_month_parameter
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Filter Query Parameters" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Non-integer_year_parameter
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Filter Query Parameters" method=GET path=/themes
=== RUN   TestHandler_GetThemes/Empty_search_parameter
=== RUN   TestHandler_GetThemes/Combined_filters_with_pagination
--- PASS: TestHandler_GetThemes (0.01s)
    --- PASS: TestHandler_GetThemes/successful_get_themes (0.00s)
    --- PASS: TestHandler_GetThemes/repository_error (0.00s)
    --- PASS: TestHandler_GetThemes/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetThemes/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetThemes/Pagination_Parameters (0.00s)
    --- PASS: TestHandler_GetThemes/Filter_by_month (0.00s)
    --- PASS: TestHandler_GetThemes/Filter_by_year (0.00s)
    --- PASS: TestHandler_GetThemes/Filter_by_search_term (0.00s)
    --- PASS: TestHandler_GetThemes/Filter_by_multiple_parameters (0.00s)
    --- PASS: TestHandler_GetThemes/Invalid_month_filter (0.00s)
    --- PASS: TestHandler_GetThemes/Invalid_year_filter (0.00s)
    --- PASS: TestHandler_GetThemes/Invalid_month_filter_-_zero (0.00s)
    --- PASS: TestHandler_GetThemes/Invalid_month_filter_-_negative (0.00s)
    --- PASS: TestHandler_GetThemes/Invalid_year_filter_-_too_high (0.00s)
    --- PASS: TestHandler_GetThemes/Non-integer_month_parameter (0.00s)
    --- PASS: TestHandler_GetThemes/Non-integer_year_parameter (0.00s)
    --- PASS: TestHandler_GetThemes/Empty_search_parameter (0.00s)
    --- PASS: TestHandler_GetThemes/Combined_filters_with_pagination (0.00s)
=== RUN   TestHandler_GetThemeByID
=== RUN   TestHandler_GetThemeByID/successful_get_theme_by_id
=== RUN   TestHandler_GetThemeByID/invalid_UUID_format
2025/10/29 20:05:39 ERROR Invalid UUID format for theme ID id=invalid-uuid error="invalid UUID length: 12"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid UUID format" method=GET path=/themes/invalid-uuid
=== RUN   TestHandler_GetThemeByID/theme_not_found
2025/10/29 20:05:39 ERROR Database error getting theme id=47f51146-59cd-4ced-9040-fb3ebe7f8fdc error="http error: 404 Error querying database for given ID"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 Error querying database for given ID" method=GET path=/themes/47f51146-59cd-4ced-9040-fb3ebe7f8fdc
=== RUN   TestHandler_GetThemeByID/repository_error
2025/10/29 20:05:39 ERROR Database error getting theme id=5ecb5b84-279e-4104-bab7-fa111b0a127b error="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="database error" method=GET path=/themes/5ecb5b84-279e-4104-bab7-fa111b0a127b
--- PASS: TestHandler_GetThemeByID (0.00s)
    --- PASS: TestHandler_GetThemeByID/successful_get_theme_by_id (0.00s)
    --- PASS: TestHandler_GetThemeByID/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_GetThemeByID/theme_not_found (0.00s)
    --- PASS: TestHandler_GetThemeByID/repository_error (0.00s)
=== RUN   TestHandler_PatchTheme
=== RUN   TestHandler_PatchTheme/successful_patch_theme
=== RUN   TestHandler_PatchTheme/invalid_UUID_format
2025/10/29 20:05:39 ERROR Invalid UUID format for theme update id=invalid-uuid error="invalid UUID length: 12"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid UUID format" method=PATCH path=/themes/invalid-uuid
=== RUN   TestHandler_PatchTheme/invalid_JSON
2025/10/29 20:05:39 ERROR Failed to parse theme update JSON error="unexpected end of JSON input"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Failed to parse theme data" method=PATCH path=/themes/5d1b45bb-6bc3-4bd4-b019-81c56eda6701
=== RUN   TestHandler_PatchTheme/validation_error_-_invalid_month
2025/10/29 20:05:39 ERROR Theme update validation failed errors="[{Error:true FailedField:Month Tag:lte:12 Value:13}]"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[month:Month is invalid]" method=PATCH path=/themes/02f0d852-6f55-43c4-a5ed-3c8c458ef5f9
=== RUN   TestHandler_PatchTheme/validation_error_-_invalid_year
2025/10/29 20:05:39 ERROR Theme update validation failed errors="[{Error:true FailedField:Year Tag:gte:1900 Value:1800}]"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[year:Year is invalid]" method=PATCH path=/themes/3c59126a-91a0-4516-90a7-d3ab94a8fb63
=== RUN   TestHandler_PatchTheme/no_fields_provided_to_update
2025/10/29 20:05:39 ERROR Failed to update theme id=2305f882-27fb-46db-8d71-c8429aa533f2 error="http error: 400 No fields provided to update"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 No fields provided to update" method=PATCH path=/themes/2305f882-27fb-46db-8d71-c8429aa533f2
=== RUN   TestHandler_PatchTheme/theme_not_found
2025/10/29 20:05:39 ERROR Failed to update theme id=f64bb85f-ea6d-4687-8cd0-ea615394c320 error="http error: 404 error querying database for given theme ID"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 404 error querying database for given theme ID" method=PATCH path=/themes/f64bb85f-ea6d-4687-8cd0-ea615394c320
=== RUN   TestHandler_PatchTheme/foreign_key_constraint_error
2025/10/29 20:05:39 ERROR Failed to update theme id=ecf54667-8e89-42e7-9378-a0fc39e559f6 error="foreign key constraint violated"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid reference to related data" method=PATCH path=/themes/ecf54667-8e89-42e7-9378-a0fc39e559f6
=== RUN   TestHandler_PatchTheme/database_connection_error
2025/10/29 20:05:39 ERROR Failed to update theme id=1ef98778-deb6-447a-b7ad-cec57c2769b6 error="connection refused"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 500 Database connection error" method=PATCH path=/themes/1ef98778-deb6-447a-b7ad-cec57c2769b6
=== RUN   TestHandler_PatchTheme/repository_error
2025/10/29 20:05:39 ERROR Failed to update theme id=4cc71c15-08f0-4962-96f7-2eab25c3e7ef error="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="database error" method=PATCH path=/themes/4cc71c15-08f0-4962-96f7-2eab25c3e7ef
--- PASS: TestHandler_PatchTheme (0.01s)
    --- PASS: TestHandler_PatchTheme/successful_patch_theme (0.00s)
    --- PASS: TestHandler_PatchTheme/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_PatchTheme/invalid_JSON (0.00s)
    --- PASS: TestHandler_PatchTheme/validation_error_-_invalid_month (0.00s)
    --- PASS: TestHandler_PatchTheme/validation_error_-_invalid_year (0.00s)
    --- PASS: TestHandler_PatchTheme/no_fields_provided_to_update (0.00s)
    --- PASS: TestHandler_PatchTheme/theme_not_found (0.00s)
    --- PASS: TestHandler_PatchTheme/foreign_key_constraint_error (0.00s)
    --- PASS: TestHandler_PatchTheme/database_connection_error (0.00s)
    --- PASS: TestHandler_PatchTheme/repository_error (0.00s)
=== RUN   TestHandler_DeleteTheme
=== RUN   TestHandler_DeleteTheme/successful_delete_theme
=== RUN   TestHandler_DeleteTheme/invalid_UUID_format
2025/10/29 20:05:39 ERROR Invalid UUID format for theme deletion id=invalid-uuid error="invalid UUID length: 12"
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid UUID format" method=DELETE path=/themes/invalid-uuid
=== RUN   TestHandler_DeleteTheme/theme_not_found_(idempotent)
=== RUN   TestHandler_DeleteTheme/repository_error
2025/10/29 20:05:39 ERROR Failed to delete theme id=bb47e426-4ead-4642-94a5-7c1af795fcf4 error="database error"
2025/10/29 20:05:39 ERROR HTTP API error err="database error" method=DELETE path=/themes/bb47e426-4ead-4642-94a5-7c1af795fcf4
--- PASS: TestHandler_DeleteTheme (0.00s)
    --- PASS: TestHandler_DeleteTheme/successful_delete_theme (0.00s)
    --- PASS: TestHandler_DeleteTheme/invalid_UUID_format (0.00s)
    --- PASS: TestHandler_DeleteTheme/theme_not_found_(idempotent) (0.00s)
    --- PASS: TestHandler_DeleteTheme/repository_error (0.00s)
PASS
ok  	specialstandard/internal/service/handler/theme	0.443s
=== RUN   TestHandler_GetTherapistByID
=== RUN   TestHandler_GetTherapistByID/successful_get_therapist_by_id
=== RUN   TestHandler_GetTherapistByID/repository_error
2025/10/29 20:05:39 ERROR Error updating document error="database error"
--- PASS: TestHandler_GetTherapistByID (0.01s)
    --- PASS: TestHandler_GetTherapistByID/successful_get_therapist_by_id (0.01s)
    --- PASS: TestHandler_GetTherapistByID/repository_error (0.00s)
=== RUN   TestHandler_GetTherapists
=== RUN   TestHandler_GetTherapists/successful_get_therapists_and_default_pagination
=== RUN   TestHandler_GetTherapists/repository_error
2025/10/29 20:05:39 ERROR HTTP API error err="database error" method=GET path=/therapists
=== RUN   TestHandler_GetTherapists/Bad_Pagination_Arguments
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 Invalid Pagination Query Parameters" method=GET path=/therapists
=== RUN   TestHandler_GetTherapists/Violating_Pagination_Arguments_Constraints
2025/10/29 20:05:39 ERROR HTTP API error err="http error: 400 map[limit:Limit is invalid page:Page is invalid]" method=GET path=/therapists
=== RUN   TestHandler_GetTherapists/Pagination_with_parameters
--- PASS: TestHandler_GetTherapists (0.00s)
    --- PASS: TestHandler_GetTherapists/successful_get_therapists_and_default_pagination (0.00s)
    --- PASS: TestHandler_GetTherapists/repository_error (0.00s)
    --- PASS: TestHandler_GetTherapists/Bad_Pagination_Arguments (0.00s)
    --- PASS: TestHandler_GetTherapists/Violating_Pagination_Arguments_Constraints (0.00s)
    --- PASS: TestHandler_GetTherapists/Pagination_with_parameters (0.00s)
=== RUN   TestHandler_CreateTherapist
=== RUN   TestHandler_CreateTherapist/successful_create_therapist
=== RUN   TestHandler_CreateTherapist/repository_error
2025/10/29 20:05:39 ERROR Error updating document error="database error"
--- PASS: TestHandler_CreateTherapist (0.00s)
    --- PASS: TestHandler_CreateTherapist/successful_create_therapist (0.00s)
    --- PASS: TestHandler_CreateTherapist/repository_error (0.00s)
=== RUN   TestHandler_DeleteTherapist
=== RUN   TestHandler_DeleteTherapist/successful_delete_therapist_by_id
=== RUN   TestHandler_DeleteTherapist/repository_error
2025/10/29 20:05:39 ERROR Error deleting document error="database error"
--- PASS: TestHandler_DeleteTherapist (0.00s)
    --- PASS: TestHandler_DeleteTherapist/successful_delete_therapist_by_id (0.00s)
    --- PASS: TestHandler_DeleteTherapist/repository_error (0.00s)
=== RUN   TestHandler_PatchTherapist
=== RUN   TestHandler_PatchTherapist/successful_patch_therapist_by_id
=== RUN   TestHandler_PatchTherapist/repository_error
2025/10/29 20:05:39 ERROR Error updating document error="database error"
--- PASS: TestHandler_PatchTherapist (0.00s)
    --- PASS: TestHandler_PatchTherapist/successful_patch_therapist_by_id (0.00s)
    --- PASS: TestHandler_PatchTherapist/repository_error (0.00s)
PASS
ok  	specialstandard/internal/service/handler/therapist	0.442s
?   	specialstandard/internal/storage	[no test files]
?   	specialstandard/internal/storage/dbinterface	[no test files]
?   	specialstandard/internal/storage/mocks	[no test files]
?   	specialstandard/internal/storage/postgres	[no test files]
=== RUN   TestResourceRepository_GetResources
2025/10/29 20:05:41 github.com/testcontainers/testcontainers-go - Connected to docker: 
  Server Version: 24.0.7
  API Version: 1.43
  Operating System: Docker Desktop
  Total Memory: 7564 MB
  Testcontainers for Go Version: v0.38.0
  Resolved Docker Host: npipe:////./pipe/docker_engine
  Resolved Docker Socket Path: //var/run/docker.sock
  Test SessionID: 5bd7bea276a22603396e99ba4ed6eb3c2025140acee4687f7e74131e4a5a66a3
  Test ProcessID: c2885ab7-e1d9-4cb2-8e0f-13c210177e9a
2025/10/29 20:05:41 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:05:41 🐳 Creating container for image testcontainers/ryuk:0.12.0
2025/10/29 20:05:41 ✅ Container created: a21fea9145ad
2025/10/29 20:05:41 🐳 Starting container: a21fea9145ad
2025/10/29 20:05:42 ✅ Container started: a21fea9145ad
2025/10/29 20:05:42 ⏳ Waiting for container id a21fea9145ad image: testcontainers/ryuk:0.12.0. Waiting for: &{Port:8080/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/10/29 20:05:42 🔔 Container is ready: a21fea9145ad
2025/10/29 20:05:42 ✅ Container created: 8b999d2d8580
2025/10/29 20:05:42 🐳 Starting container: 8b999d2d8580
2025/10/29 20:05:43 ✅ Container started: 8b999d2d8580
2025/10/29 20:05:43 ⏳ Waiting for container id 8b999d2d8580 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000120550 Strategies:[0xc000108120]}
2025/10/29 20:05:46 🔔 Container is ready: 8b999d2d8580
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestResourceRepository_GetResources (5.73s)
=== RUN   TestResourceRepository_GetResourceByID
2025/10/29 20:05:47 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:05:47 ✅ Container created: 263e4514e41f
2025/10/29 20:05:47 🐳 Starting container: 263e4514e41f
2025/10/29 20:05:47 ✅ Container started: 263e4514e41f
2025/10/29 20:05:47 ⏳ Waiting for container id 263e4514e41f image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000120600 Strategies:[0xc00009f140]}
2025/10/29 20:05:50 🔔 Container is ready: 263e4514e41f
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestResourceRepository_GetResourceByID (3.97s)
=== RUN   TestResourceRepository_CreateResource
2025/10/29 20:05:51 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:05:51 ✅ Container created: 5cf9c1f02d84
2025/10/29 20:05:51 🐳 Starting container: 5cf9c1f02d84
2025/10/29 20:05:51 ✅ Container started: 5cf9c1f02d84
2025/10/29 20:05:51 ⏳ Waiting for container id 5cf9c1f02d84 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0004cf720 Strategies:[0xc00068a900]}
2025/10/29 20:05:55 🔔 Container is ready: 5cf9c1f02d84
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestResourceRepository_CreateResource (4.10s)
=== RUN   TestResourceRepository_UpdateResource
2025/10/29 20:05:55 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:05:55 ✅ Container created: bcd53560f50a
2025/10/29 20:05:55 🐳 Starting container: bcd53560f50a
2025/10/29 20:05:55 ✅ Container started: bcd53560f50a
2025/10/29 20:05:55 ⏳ Waiting for container id bcd53560f50a image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0004095e0 Strategies:[0xc0006202a0]}
2025/10/29 20:05:59 🔔 Container is ready: bcd53560f50a
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestResourceRepository_UpdateResource (4.05s)
=== RUN   TestResourceRepository_DeleteResource
2025/10/29 20:05:59 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:05:59 ✅ Container created: 0864a4d9b630
2025/10/29 20:05:59 🐳 Starting container: 0864a4d9b630
2025/10/29 20:05:59 ✅ Container started: 0864a4d9b630
2025/10/29 20:05:59 ⏳ Waiting for container id 0864a4d9b630 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000236a00 Strategies:[0xc00009eae0]}
2025/10/29 20:06:02 🔔 Container is ready: 0864a4d9b630
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestResourceRepository_DeleteResource (3.85s)
=== RUN   TestSessionResourceRepository_PostSessionResource
2025/10/29 20:06:03 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:03 ✅ Container created: 456463a160cd
2025/10/29 20:06:03 🐳 Starting container: 456463a160cd
2025/10/29 20:06:03 ✅ Container started: 456463a160cd
2025/10/29 20:06:03 ⏳ Waiting for container id 456463a160cd image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000788ca0 Strategies:[0xc00068f020]}
2025/10/29 20:06:06 🔔 Container is ready: 456463a160cd
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionResourceRepository_PostSessionResource (3.29s)
=== RUN   TestSessionResourceRepository_DeleteSessionResource
2025/10/29 20:06:06 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:06 ✅ Container created: 8d1a2a4e4282
2025/10/29 20:06:06 🐳 Starting container: 8d1a2a4e4282
2025/10/29 20:06:07 ✅ Container started: 8d1a2a4e4282
2025/10/29 20:06:07 ⏳ Waiting for container id 8d1a2a4e4282 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001e8b90 Strategies:[0xc0006213e0]}
2025/10/29 20:06:09 🔔 Container is ready: 8d1a2a4e4282
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionResourceRepository_DeleteSessionResource (3.67s)
=== RUN   TestSessionResourceRepository_GetResourcesBySessionID
2025/10/29 20:06:10 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:10 ✅ Container created: 790746e388c8
2025/10/29 20:06:10 🐳 Starting container: 790746e388c8
2025/10/29 20:06:10 ✅ Container started: 790746e388c8
2025/10/29 20:06:10 ⏳ Waiting for container id 790746e388c8 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0004cece0 Strategies:[0xc0003197a0]}
2025/10/29 20:06:13 🔔 Container is ready: 790746e388c8
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionResourceRepository_GetResourcesBySessionID (3.88s)
=== RUN   TestSessionStudentRepository_CreateSessionStudent
2025/10/29 20:06:13 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:14 ✅ Container created: 69bbf8badf40
2025/10/29 20:06:14 🐳 Starting container: 69bbf8badf40
2025/10/29 20:06:14 ✅ Container started: 69bbf8badf40
2025/10/29 20:06:14 ⏳ Waiting for container id 69bbf8badf40 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0004cf100 Strategies:[0xc0006207e0]}
2025/10/29 20:06:17 🔔 Container is ready: 69bbf8badf40
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionStudentRepository_CreateSessionStudent (3.91s)
=== RUN   TestSessionStudentRepository_DeleteSessionStudent
2025/10/29 20:06:17 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:17 ✅ Container created: 2c0d33c8d5c1
2025/10/29 20:06:17 🐳 Starting container: 2c0d33c8d5c1
2025/10/29 20:06:18 ✅ Container started: 2c0d33c8d5c1
2025/10/29 20:06:18 ⏳ Waiting for container id 2c0d33c8d5c1 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0007886e0 Strategies:[0xc000109020]}
2025/10/29 20:06:21 🔔 Container is ready: 2c0d33c8d5c1
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionStudentRepository_DeleteSessionStudent (3.78s)
=== RUN   TestSessionStudentRepository_PatchSessionStudent
2025/10/29 20:06:21 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:21 ✅ Container created: f2bab49ab423
2025/10/29 20:06:21 🐳 Starting container: f2bab49ab423
2025/10/29 20:06:22 ✅ Container started: f2bab49ab423
2025/10/29 20:06:22 ⏳ Waiting for container id f2bab49ab423 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000694130 Strategies:[0xc0004041e0]}
2025/10/29 20:06:25 🔔 Container is ready: f2bab49ab423
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionStudentRepository_PatchSessionStudent (3.90s)
=== RUN   TestSessionRepository_GetSessions
2025/10/29 20:06:25 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:25 ✅ Container created: c27561981f4e
2025/10/29 20:06:25 🐳 Starting container: c27561981f4e
2025/10/29 20:06:26 ✅ Container started: c27561981f4e
2025/10/29 20:06:26 ⏳ Waiting for container id c27561981f4e image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0007892a0 Strategies:[0xc000620900]}
2025/10/29 20:06:29 🔔 Container is ready: c27561981f4e
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_GetSessions (3.98s)
=== RUN   TestSessionRepository_GetSessionByID
2025/10/29 20:06:29 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:29 ✅ Container created: b3161e461100
2025/10/29 20:06:29 🐳 Starting container: b3161e461100
2025/10/29 20:06:30 ✅ Container started: b3161e461100
2025/10/29 20:06:30 ⏳ Waiting for container id b3161e461100 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0006946e0 Strategies:[0xc00068a7e0]}
2025/10/29 20:06:33 🔔 Container is ready: b3161e461100
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_GetSessionByID (3.83s)
=== RUN   TestSessionRepository_DeleteSessions
2025/10/29 20:06:33 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:33 ✅ Container created: 8e286cad88df
2025/10/29 20:06:33 🐳 Starting container: 8e286cad88df
2025/10/29 20:06:34 ✅ Container started: 8e286cad88df
2025/10/29 20:06:34 ⏳ Waiting for container id 8e286cad88df image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000236c70 Strategies:[0xc000284780]}
2025/10/29 20:06:37 🔔 Container is ready: 8e286cad88df
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_DeleteSessions (4.16s)
=== RUN   TestSessionRepository_PostSessions
2025/10/29 20:06:37 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:37 ✅ Container created: c6f3cf7be383
2025/10/29 20:06:37 🐳 Starting container: c6f3cf7be383
2025/10/29 20:06:38 ✅ Container started: c6f3cf7be383
2025/10/29 20:06:38 ⏳ Waiting for container id c6f3cf7be383 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000354360 Strategies:[0xc000109e00]}
2025/10/29 20:06:41 🔔 Container is ready: c6f3cf7be383
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_PostSessions (4.72s)
=== RUN   TestSessionRepository_PatchSessions
2025/10/29 20:06:42 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:42 ✅ Container created: be4a3c197308
2025/10/29 20:06:42 🐳 Starting container: be4a3c197308
2025/10/29 20:06:43 ✅ Container started: be4a3c197308
2025/10/29 20:06:43 ⏳ Waiting for container id be4a3c197308 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000694010 Strategies:[0xc000404300]}
2025/10/29 20:06:46 🔔 Container is ready: be4a3c197308
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_PatchSessions (4.62s)
=== RUN   TestGetSessionStudents
2025/10/29 20:06:46 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:46 ✅ Container created: ab6a9c54d88e
2025/10/29 20:06:46 🐳 Starting container: ab6a9c54d88e
2025/10/29 20:06:47 ✅ Container started: ab6a9c54d88e
2025/10/29 20:06:47 ⏳ Waiting for container id ab6a9c54d88e image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000694600 Strategies:[0xc00068f860]}
2025/10/29 20:06:50 🔔 Container is ready: ab6a9c54d88e
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestGetSessionStudents (4.12s)
=== RUN   TestStudentRepository_GetStudents
2025/10/29 20:06:50 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:51 ✅ Container created: cd2445730693
2025/10/29 20:06:51 🐳 Starting container: cd2445730693
2025/10/29 20:06:51 ✅ Container started: cd2445730693
2025/10/29 20:06:51 ⏳ Waiting for container id cd2445730693 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000236c60 Strategies:[0xc00009e420]}
2025/10/29 20:06:54 🔔 Container is ready: cd2445730693
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents (4.02s)
=== RUN   TestStudentRepository_GetStudents_FilterByGrade
2025/10/29 20:06:54 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:55 ✅ Container created: b9611c269e33
2025/10/29 20:06:55 🐳 Starting container: b9611c269e33
2025/10/29 20:06:55 ✅ Container started: b9611c269e33
2025/10/29 20:06:55 ⏳ Waiting for container id b9611c269e33 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0003557e0 Strategies:[0xc000702780]}
2025/10/29 20:06:59 🔔 Container is ready: b9611c269e33
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_FilterByGrade (4.53s)
=== RUN   TestStudentRepository_GetStudents_FilterByTherapist
2025/10/29 20:06:59 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:06:59 ✅ Container created: 81eca421dbf5
2025/10/29 20:06:59 🐳 Starting container: 81eca421dbf5
2025/10/29 20:07:00 ✅ Container started: 81eca421dbf5
2025/10/29 20:07:00 ⏳ Waiting for container id 81eca421dbf5 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000694730 Strategies:[0xc0008823c0]}
2025/10/29 20:07:03 🔔 Container is ready: 81eca421dbf5
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_FilterByTherapist (3.85s)
=== RUN   TestStudentRepository_GetStudents_FilterByName
2025/10/29 20:07:03 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:03 ✅ Container created: f7664540ebcc
2025/10/29 20:07:03 🐳 Starting container: f7664540ebcc
2025/10/29 20:07:04 ✅ Container started: f7664540ebcc
2025/10/29 20:07:04 ⏳ Waiting for container id f7664540ebcc image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000237810 Strategies:[0xc0007022a0]}
2025/10/29 20:07:07 🔔 Container is ready: f7664540ebcc
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_FilterByName (3.96s)
=== RUN   TestStudentRepository_GetStudents_CombinedFilters
2025/10/29 20:07:07 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:07 ✅ Container created: f893f8e12b40
2025/10/29 20:07:07 🐳 Starting container: f893f8e12b40
2025/10/29 20:07:08 ✅ Container started: f893f8e12b40
2025/10/29 20:07:08 ⏳ Waiting for container id f893f8e12b40 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000237750 Strategies:[0xc000319080]}
2025/10/29 20:07:11 🔔 Container is ready: f893f8e12b40
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_CombinedFilters (4.06s)
=== RUN   TestStudentRepository_GetStudents_CaseInsensitiveSearch
2025/10/29 20:07:11 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:11 ✅ Container created: e80ec385990c
2025/10/29 20:07:11 🐳 Starting container: e80ec385990c
2025/10/29 20:07:12 ✅ Container started: e80ec385990c
2025/10/29 20:07:12 ⏳ Waiting for container id e80ec385990c image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001e8880 Strategies:[0xc00068f7a0]}
2025/10/29 20:07:15 🔔 Container is ready: e80ec385990c
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_CaseInsensitiveSearch (4.14s)
=== RUN   TestStudentRepository_GetStudents_WithPagination
2025/10/29 20:07:15 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:15 ✅ Container created: b48f6744d35f
2025/10/29 20:07:15 🐳 Starting container: b48f6744d35f
2025/10/29 20:07:16 ✅ Container started: b48f6744d35f
2025/10/29 20:07:16 ⏳ Waiting for container id b48f6744d35f image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001afc80 Strategies:[0xc0008835c0]}
2025/10/29 20:07:19 🔔 Container is ready: b48f6744d35f
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudents_WithPagination (3.96s)
=== RUN   TestStudentRepository_GetStudent
2025/10/29 20:07:19 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:19 ✅ Container created: ab7db43e974f
2025/10/29 20:07:19 🐳 Starting container: ab7db43e974f
2025/10/29 20:07:20 ✅ Container started: ab7db43e974f
2025/10/29 20:07:20 ⏳ Waiting for container id ab7db43e974f image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0004cee10 Strategies:[0xc000285e00]}
2025/10/29 20:07:23 🔔 Container is ready: ab7db43e974f
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_GetStudent (3.93s)
=== RUN   TestStudentRepository_AddStudent
2025/10/29 20:07:23 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:23 ✅ Container created: 6fa35ac253fb
2025/10/29 20:07:23 🐳 Starting container: 6fa35ac253fb
2025/10/29 20:07:24 ✅ Container started: 6fa35ac253fb
2025/10/29 20:07:24 ⏳ Waiting for container id 6fa35ac253fb image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001af8d0 Strategies:[0xc000109da0]}
2025/10/29 20:07:27 🔔 Container is ready: 6fa35ac253fb
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_AddStudent (3.80s)
=== RUN   TestStudentRepository_UpdateStudent
2025/10/29 20:07:27 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:27 ✅ Container created: 6113bce237ed
2025/10/29 20:07:27 🐳 Starting container: 6113bce237ed
2025/10/29 20:07:28 ✅ Container started: 6113bce237ed
2025/10/29 20:07:28 ⏳ Waiting for container id 6113bce237ed image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000354e60 Strategies:[0xc0008821e0]}
2025/10/29 20:07:31 🔔 Container is ready: 6113bce237ed
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_UpdateStudent (4.59s)
=== RUN   TestStudentRepository_DeleteStudent
2025/10/29 20:07:31 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:31 ✅ Container created: f870b7d36aed
2025/10/29 20:07:31 🐳 Starting container: f870b7d36aed
2025/10/29 20:07:32 ✅ Container started: f870b7d36aed
2025/10/29 20:07:32 ⏳ Waiting for container id f870b7d36aed image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000120850 Strategies:[0xc00068f860]}
2025/10/29 20:07:35 🔔 Container is ready: f870b7d36aed
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_DeleteStudent (4.18s)
=== RUN   TestStudentRepository_PromoteStudents
2025/10/29 20:07:35 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:36 ✅ Container created: 93cf2e7e4526
2025/10/29 20:07:36 🐳 Starting container: 93cf2e7e4526
2025/10/29 20:07:36 ✅ Container started: 93cf2e7e4526
2025/10/29 20:07:36 ⏳ Waiting for container id 93cf2e7e4526 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0003557f0 Strategies:[0xc00090a240]}
2025/10/29 20:07:39 🔔 Container is ready: 93cf2e7e4526
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestStudentRepository_PromoteStudents (3.91s)
=== RUN   TestThemeRepository_CreateTheme
2025/10/29 20:07:39 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:39 ✅ Container created: 507ef2807636
2025/10/29 20:07:39 🐳 Starting container: 507ef2807636
2025/10/29 20:07:40 ✅ Container started: 507ef2807636
2025/10/29 20:07:40 ⏳ Waiting for container id 507ef2807636 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000355d40 Strategies:[0xc000703320]}
2025/10/29 20:07:45 🔔 Container is ready: 507ef2807636
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_CreateTheme (5.37s)
=== RUN   TestThemeRepository_GetThemes
2025/10/29 20:07:45 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:45 ✅ Container created: 76d864f0bc9a
2025/10/29 20:07:45 🐳 Starting container: 76d864f0bc9a
2025/10/29 20:07:45 ✅ Container started: 76d864f0bc9a
2025/10/29 20:07:45 ⏳ Waiting for container id 76d864f0bc9a image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000788960 Strategies:[0xc000620780]}
2025/10/29 20:07:48 🔔 Container is ready: 76d864f0bc9a
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_GetThemes (3.91s)
=== RUN   TestThemeRepository_GetThemes_WithFilters
2025/10/29 20:07:49 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:49 ✅ Container created: ec8210875620
2025/10/29 20:07:49 🐳 Starting container: ec8210875620
2025/10/29 20:07:49 ✅ Container started: ec8210875620
2025/10/29 20:07:49 ⏳ Waiting for container id ec8210875620 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001aedd0 Strategies:[0xc00090a360]}
2025/10/29 20:07:52 🔔 Container is ready: ec8210875620
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_GetThemes_WithFilters (3.92s)
=== RUN   TestThemeRepository_GetThemeByID
2025/10/29 20:07:53 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:53 ✅ Container created: 706a50f32333
2025/10/29 20:07:53 🐳 Starting container: 706a50f32333
2025/10/29 20:07:54 ✅ Container started: 706a50f32333
2025/10/29 20:07:54 ⏳ Waiting for container id 706a50f32333 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000694ec0 Strategies:[0xc000109980]}
2025/10/29 20:07:57 🔔 Container is ready: 706a50f32333
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_GetThemeByID (4.99s)
=== RUN   TestThemeRepository_PatchTheme
2025/10/29 20:07:58 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:07:58 ✅ Container created: bc73dd463f8c
2025/10/29 20:07:58 🐳 Starting container: bc73dd463f8c
2025/10/29 20:07:58 ✅ Container started: bc73dd463f8c
2025/10/29 20:07:58 ⏳ Waiting for container id bc73dd463f8c image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001af270 Strategies:[0xc00090bce0]}
2025/10/29 20:08:01 🔔 Container is ready: bc73dd463f8c
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_PatchTheme (4.06s)
=== RUN   TestThemeRepository_DeleteTheme
2025/10/29 20:08:02 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:02 ✅ Container created: 62f7fae0dd02
2025/10/29 20:08:02 🐳 Starting container: 62f7fae0dd02
2025/10/29 20:08:03 ✅ Container started: 62f7fae0dd02
2025/10/29 20:08:03 ⏳ Waiting for container id 62f7fae0dd02 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0003073a0 Strategies:[0xc0006c4fc0]}
2025/10/29 20:08:06 🔔 Container is ready: 62f7fae0dd02
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_DeleteTheme (4.22s)
=== RUN   TestThemeRepository_DatabaseConstraints
2025/10/29 20:08:06 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:06 ✅ Container created: 368c151e8006
2025/10/29 20:08:06 🐳 Starting container: 368c151e8006
2025/10/29 20:08:07 ✅ Container started: 368c151e8006
2025/10/29 20:08:07 ⏳ Waiting for container id 368c151e8006 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001aff00 Strategies:[0xc0006c4cc0]}
2025/10/29 20:08:10 🔔 Container is ready: 368c151e8006
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestThemeRepository_DatabaseConstraints (4.14s)
=== RUN   TestSessionRepository_GetTherapistByID
2025/10/29 20:08:10 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:10 ✅ Container created: f3328cbcb9f3
2025/10/29 20:08:10 🐳 Starting container: f3328cbcb9f3
2025/10/29 20:08:11 ✅ Container started: f3328cbcb9f3
2025/10/29 20:08:11 ⏳ Waiting for container id f3328cbcb9f3 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0001216a0 Strategies:[0xc0008827e0]}
2025/10/29 20:08:14 🔔 Container is ready: f3328cbcb9f3
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_GetTherapistByID (3.75s)
=== RUN   TestSessionRepository_GetTherapists
2025/10/29 20:08:14 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:14 ✅ Container created: becafb33ea24
2025/10/29 20:08:14 🐳 Starting container: becafb33ea24
2025/10/29 20:08:14 ✅ Container started: becafb33ea24
2025/10/29 20:08:14 ⏳ Waiting for container id becafb33ea24 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0006f29c0 Strategies:[0xc000702a20]}
2025/10/29 20:08:17 🔔 Container is ready: becafb33ea24
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_GetTherapists (3.78s)
=== RUN   TestSessionRepository_PatchTherapist
2025/10/29 20:08:17 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:18 ✅ Container created: 505dc7a315bd
2025/10/29 20:08:18 🐳 Starting container: 505dc7a315bd
2025/10/29 20:08:18 ✅ Container started: 505dc7a315bd
2025/10/29 20:08:18 ⏳ Waiting for container id 505dc7a315bd image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000788380 Strategies:[0xc00090a300]}
2025/10/29 20:08:22 🔔 Container is ready: 505dc7a315bd
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_PatchTherapist (4.34s)
=== RUN   TestSessionRepository_DeleteTherapist
2025/10/29 20:08:22 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:22 ✅ Container created: d7d90a05c56c
2025/10/29 20:08:22 🐳 Starting container: d7d90a05c56c
2025/10/29 20:08:23 ✅ Container started: d7d90a05c56c
2025/10/29 20:08:23 ⏳ Waiting for container id d7d90a05c56c image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc0007899a0 Strategies:[0xc000109ec0]}
2025/10/29 20:08:26 🔔 Container is ready: d7d90a05c56c
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_DeleteTherapist (4.12s)
=== RUN   TestSessionRepository_CreateTherapist
2025/10/29 20:08:26 🐳 Creating container for image postgres:15-alpine
2025/10/29 20:08:26 ✅ Container created: 1abf17ccaaf8
2025/10/29 20:08:26 🐳 Starting container: 1abf17ccaaf8
2025/10/29 20:08:27 ✅ Container started: 1abf17ccaaf8
2025/10/29 20:08:27 ⏳ Waiting for container id 1abf17ccaaf8 image: postgres:15-alpine. Waiting for: &{timeout:<nil> deadline:0xc000909340 Strategies:[0xc0007032c0]}
2025/10/29 20:08:30 🔔 Container is ready: 1abf17ccaaf8
    testdb.go:217: ERROR: column "id" referenced in foreign key constraint does not exist (SQLSTATE 42703)
--- FAIL: TestSessionRepository_CreateTherapist (3.96s)
FAIL
FAIL	specialstandard/internal/storage/postgres/schema	169.467s
?   	specialstandard/internal/storage/postgres/testutil	[no test files]
?   	specialstandard/internal/utils	[no test files]
?   	specialstandard/internal/xvalidator	[no test files]
FAIL
